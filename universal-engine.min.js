(function(){"use strict";function n(){document.querySelectorAll(".ue-activity, .ue-container").forEach(function(e){t(e)})}function t(e){e.querySelectorAll(".ue-question").forEach(function(e){var t=r(e);"mcq"===t?o(e):"drag-sort"===t&&a(e)})}function r(e){var t=e.dataset.qtype;if(t)return t;return e.querySelector(".ue-dnd-container, .ue-drag-container")||e.classList.contains("ue-dnd-question")?"drag-sort":e.classList.contains("ue-truefalse-question")||e.querySelector(".ue-option-tf, .ue-option-mcq")?"mcq":"mcq"}function o(e){var t=e.querySelectorAll(".ue-option");t.length&&t.forEach(function(n){n.addEventListener("click",function(){c(e,n,t)})})}function c(e,t,n){n.forEach(function(e){e.classList.remove("ue-selected"),e.style.backgroundColor="",e.style.borderColor=""}),t.classList.add("ue-selected");var r=(""+(t.dataset.correct||"")).toLowerCase(),o="true"===r;o?(t.style.backgroundColor="#dcfce7",t.style.borderColor="#16a34a"):(t.style.backgroundColor="#fee2e2",t.style.borderColor="#dc2626"),e.dataset.selectedOptionId=t.dataset.optionId||"",e.dataset.isCorrect=""+o}function a(e){var t=e.querySelector(".ue-drag-container")||e.querySelector(".ue-dnd-container");if(!t)return;var n=t.querySelector(".ue-dnd-list")||t.querySelector("ul")||t.querySelector("ol")||t,r=n.querySelectorAll(".ue-drag, .ue-dnd-item");r.length&&(r.forEach(function(e){e.draggable=!0,e.addEventListener("dragstart",function(t){e.classList.add("ue-dragging");try{t.dataTransfer.setData("text/plain",e.dataset.value||""),t.dataTransfer.effectAllowed="move"}catch(e){}}),e.addEventListener("dragend",function(){e.classList.remove("ue-dragging")})}),n.addEventListener("dragover",function(e){e.preventDefault();var t=n.querySelector(".ue-dragging");if(!t)return;var r=i(n,e.clientX,e.clientY);r?r!==t&&n.insertBefore(t,r):n.appendChild(t)}),n.addEventListener("drop",function(e){e.preventDefault(),d(t)}))}function i(e,t,n){var r=[].slice.call(e.querySelectorAll(".ue-drag, .ue-dnd-item")).filter(function(e){return!e.classList.contains("ue-dragging")}),o=null,c=-1/0;return r.forEach(function(e){var r=e.getBoundingClientRect(),a=n-(r.top+r.height/2);a<0&&a>c&&(c=a,o=e)}),o}function d(e){var t=e.dataset.correctOrder||"";if(!t)return;var n=t.split(",").map(function(e){return e.trim()}).filter(Boolean),r=e.querySelectorAll(".ue-drag, .ue-dnd-item"),o=[].map.call(r,function(e){return(e.dataset.value||"").trim()}),c=o.length===n.length&&o.every(function(e,t){return e===n[t]});c?(e.style.outline="2px solid #16a34a",e.style.boxShadow="0 0 0 4px rgba(22,163,74,0.20)",e.dataset.isCorrect="true"):(e.style.outline="2px solid #dc2626",e.style.boxShadow="0 0 0 4px rgba(220,38,38,0.20)",e.dataset.isCorrect="false")} "loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n();})();
